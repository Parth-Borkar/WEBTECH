<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scratch Pong – 2 Players</title>
  <style>
    body {
      background: #111;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
    }

    canvas {
      background: black;
      border: 4px solid white;
      display: block;
      margin: 20px auto;
    }
  </style>
</head>
<body>

<h1>Scratch Pong – 2 Players</h1>
<p>W/S = Left Player &nbsp; | &nbsp; ↑/↓ = Right Player</p>

<canvas id="game" width="600" height="400"></canvas>

<script>
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");

  /* ========= GAME OBJECTS ========= */
  const paddleHeight = 80;
  const paddleWidth = 10;

  const leftPaddle = {
    x: 20,
    y: canvas.height / 2 - paddleHeight / 2,
    speed: 5
  };

  const rightPaddle = {
    x: canvas.width - 30,
    y: canvas.height / 2 - paddleHeight / 2,
    speed: 5
  };

  const ball = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    radius: 8,
    speedX: 4,
    speedY: 3
  };

  let leftScore = 0;
  let rightScore = 0;

  const keys = {};

  /* ========= INPUT ========= */
  document.addEventListener("keydown", e => keys[e.key] = true);
  document.addEventListener("keyup", e => keys[e.key] = false);

  /* ========= DRAW FUNCTIONS ========= */
  function drawRect(x, y, w, h) {
    ctx.fillRect(x, y, w, h);
  }

  function drawBall() {
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    ctx.fill();
  }

  function drawNet() {
    for (let i = 0; i < canvas.height; i += 20) {
      ctx.fillRect(canvas.width / 2 - 1, i, 2, 10);
    }
  }

  function drawScore() {
    ctx.font = "24px Arial";
    ctx.fillText(leftScore, canvas.width / 4, 30);
    ctx.fillText(rightScore, canvas.width * 3 / 4, 30);
  }

  /* ========= GAME LOGIC ========= */
  function movePaddles() {
    if (keys["w"] && leftPaddle.y > 0) leftPaddle.y -= leftPaddle.speed;
    if (keys["s"] && leftPaddle.y < canvas.height - paddleHeight) leftPaddle.y += leftPaddle.speed;

    if (keys["ArrowUp"] && rightPaddle.y > 0) rightPaddle.y -= rightPaddle.speed;
    if (keys["ArrowDown"] && rightPaddle.y < canvas.height - paddleHeight) rightPaddle.y += rightPaddle.speed;
  }

  function resetBall(direction) {
    ball.x = canvas.width / 2;
    ball.y = canvas.height / 2;
    ball.speedX = direction * 4;
    ball.speedY = (Math.random() * 4 - 2);
  }

  function moveBall() {
    ball.x += ball.speedX;
    ball.y += ball.speedY;

    // Wall collision
    if (ball.y < ball.radius || ball.y > canvas.height - ball.radius) {
      ball.speedY *= -1;
    }

    // Left paddle collision
    if (
      ball.x - ball.radius < leftPaddle.x + paddleWidth &&
      ball.y > leftPaddle.y &&
      ball.y < leftPaddle.y + paddleHeight
    ) {
      ball.speedX *= -2;
      ;
    }

    // Right paddle collision
    if (
      ball.x + ball.radius > rightPaddle.x &&
      ball.y > rightPaddle.y &&
      ball.y < rightPaddle.y + paddleHeight
    ) {
      ball.speedX *= -3;
    }

    // Scoring
    if (ball.x < 0) {
      rightScore++;
      resetBall(1);
    }

    if (ball.x > canvas.width) {
      leftScore++;
      resetBall(-1);
    }
  }

  /* ========= MAIN LOOP ========= */
  function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "white";
    drawNet();
    drawRect(leftPaddle.x, leftPaddle.y, paddleWidth, paddleHeight);
    drawRect(rightPaddle.x, rightPaddle.y, paddleWidth, paddleHeight);
    drawBall();
    drawScore();

    movePaddles();
    moveBall();

    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>

</body>
</html>
